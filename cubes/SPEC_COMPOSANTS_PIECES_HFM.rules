#Region System
FEEDSTRINGS;
SKIPCHECK;
#EndRegion

# Q_PIECE_COMPOSANT_PIECES_HFM feeder dans ce cube
['Q_PIECE_COMPOSANT_PIECES_HFM'] = N:['Q_SPEC_COMPOSANT_PIECES_HFM'] * ['Q_PIECES_HFM'] ;


# PU_SPEC feeder dans ce cube
['PU_SPEC'] = N: ['PU'] + ['CD'] + ['PRC'] + ['MAT'] ;


# EUR_HFM feeder dans ce cube
['EUR_HFM' , 'PU'] = N:DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM,DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise'),!MOIS,'PU') \ DB('P_TX_CHANGE',!EXERCICES,!Scenario,!Version, DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise') ,!MOIS,'TAUX')  ;


# Convesion en Euro HFM
['EUR_HFM' , 'CD1'] = N:DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM,DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise'),!MOIS,'CD1') \ DB('P_TX_CHANGE',!EXERCICES,!Scenario,!Version, DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise') ,!MOIS,'TAUX')  ;

['EUR_HFM' , 'CD2'] = N:DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM,DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise'),!MOIS,'CD2') \ DB('P_TX_CHANGE',!EXERCICES,!Scenario,!Version, DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise') ,!MOIS,'TAUX')  ;

['EUR_HFM' , 'CD3'] = N:DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM,DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise'),!MOIS,'CD3') \ DB('P_TX_CHANGE',!EXERCICES,!Scenario,!Version, DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise') ,!MOIS,'TAUX')  ;

['EUR_HFM' , 'PRC'] = N:DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM,DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise'),!MOIS,'PRC') \ DB('P_TX_CHANGE',!EXERCICES,!Scenario,!Version, DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise') ,!MOIS,'TAUX')  ;

['EUR_HFM' , 'MAT'] = N:DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM,DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise'),!MOIS,'MAT') \ DB('P_TX_CHANGE',!EXERCICES,!Scenario,!Version, DB('}ElementAttributes_FOURNISSEUR',!FOURNISSEUR,'Devise') ,!MOIS,'TAUX') ;

# Conso Unitaire
['PU'] = C:0 ;
['TOTAL_PIECES_HFM','CD'] = C:0;
['CD1'] = C:0;
['CD2'] = C:0;
['CD3'] = C:0;
['PU_SPEC'] = C:0;

Feeders ;

# Q_PIECE
[ 'Q_PIECES_HFM'  ] => ['Q_PIECE_COMPOSANT_PIECES_HFM'] ;
[ 'Q_SPEC_COMPOSANT_PIECES_HFM'  ] => ['Q_PIECE_COMPOSANT_PIECES_HFM'] ;

# PU_SPEC
[  'PU' ] => ['PU_SPEC'] ;
[ 'CD' ] => ['PU_SPEC'] ;
[ 'PRC' ] => ['PU_SPEC'] ;
[ 'MAT'] => ['PU_SPEC'] ;


# EUR_HFM
['PU'] => DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM, 'EUR_HFM' ,!MOIS,'PU') ;

['CD1'] => DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM, 'EUR_HFM' ,!MOIS,'CD1') ;

['CD2'] => DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM, 'EUR_HFM' ,!MOIS,'CD2') ;

['CD3'] => DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM, 'EUR_HFM' ,!MOIS,'CD3') ;

['PRC'] => DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM, 'EUR_HFM' ,!MOIS,'PRC') ;

['MAT'] => DB('SPEC_COMPOSANTS_PIECES_HFM',!EXERCICES,!Scenario,!Version,!PIECES_HFM,!FOURNISSEUR,!COMPOSANT_PIECES_HFM, 'EUR_HFM' ,!MOIS,'MAT') ;